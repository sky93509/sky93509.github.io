
     //獲取Cookie例項物件中的元素值
     Cookie[] cookie=request.getCookies();
     String username="";
     String password="";
     if(cookie!=null && cookie.length>0){
      for(Cookie c:cookie){
       if(c.getName().equals("username")){
        username=c.getValue();
       }
       if(c.getName().equals("password")){
        password=c.getValue();
       }
      }
     }

  <body>
    <h1>使用者登入</h1>
    <hr>
        <form name="loginForm" action="dologin.jsp" method="post">
       <table>
         <tr>
           <td>使用者名稱：</td>
           <td><input type="text" name="username" value="<%=username %>"/></td>
         </tr>
         <tr>
           <td>密碼：</td>
           <td><input type="password" name="password" value="<%=password %>" /></td>
         </tr>
         <tr>
           <td colspan="2"><input type="checkbox" name="isUseCookie" checked="checked"/>十天內記住我的登入狀態</td>
         </tr>
         <tr>
           <td colspan="2" align="center"><input type="submit" value="登入"/><input type="reset" value="取消"/></td>
         </tr>
              <h1>登入成功</h1>
    <hr>
    <br>
    <br>
    <br>

 //首先推斷使用者是否記住了登陸狀態
 String[] isUseCookie = request.getParameterValues("isUseCookie");
 if(isUseCookie!=null && isUseCookie.length>0){
  //將username與password儲存到Cookie中
  String username=request.getParameter("username");
  String password=request.getParameter("password");
  
  //定義Cookie物件
  Cookie usernameCookie=new Cookie("username",username);
  Cookie passwordCookie=new Cookie("password",password);
  //設定Cookie物件的有效時間
  usernameCookie.setMaxAge(864000);//10天
  passwordCookie.setMaxAge(864000);//10天
  
  //向server中加入Cookie
  response.addCookie(usernameCookie);
  response.addCookie(passwordCookie); 
 }
 else{
  //檢查之前是否有cookie存在
  Cookie[] cookie=request.getCookies();
  if(cookie!=null && cookie.length>0){
   //遍歷Cookie
   for(Cookie c:cookie){
    if(c.getName().equals("username")||   //假設出現username和password的Cookie
      c.getName().equals("password")){
     c.setMaxAge(0);//將該cookie的時間設為0
     response.addCookie(c);//又一次將Cookie加入到server中
    }
   }
  }
 }

    <a href="users.jsp" target="_blank">檢視使用者資訊</a>
    

       </table>
    </form>
  </body>
